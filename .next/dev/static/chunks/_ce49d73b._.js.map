{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/rikdewit/code/Miked.app/utils/stageConfig.ts"],"sourcesContent":["import { StageItem } from '../types';\n\n// --- Constants ---\nexport const STAGE_WIDTH = 8; // Wider stage for better spacing\nexport const STAGE_DEPTH = 5; \n\n// --- Color Palette ---\nexport const COLORS = {\n  person: '#3b82f6',     // Blue 500\n  amp: '#1e293b',        // Slate 800\n  drum: '#ef4444',       // Red 500\n  keys: '#8b5cf6',       // Violet 500\n  mic: '#94a3b8',        // Slate 400\n  instrument: '#cbd5e1', // Slate 300 (Lighter Neutral)\n  pedalboard: '#111827', // Gray 900\n  di: '#f97316',         // Orange 500\n  monitor: '#374151',    // Gray 700\n  power: '#eab308',      // Yellow 500\n  stand: '#64748b'       // Slate 500\n};\n\n// --- Item Configuration Helper ---\nexport const getItemConfig = (item: StageItem) => {\n  if (item.type === 'custom') {\n    const w = item.customWidth ?? 0;\n    const d = item.customDepth ?? 0;\n    if (w === 0 && d === 0) {\n      return { width: 0.3, depth: 0.3, height: 0.01, color: 'transparent', shape: 'box' };\n    }\n    return { width: w, depth: d, height: item.customHeight ?? 0.3, color: '#6366f1', shape: 'box' };\n  }\n\n  const isPerson = item.type === 'person';\n  const isMonitor = item.type === 'monitor';\n  const isPower = item.type === 'power';\n  const isStand = item.type === 'stand';\n  const label = (item.label || '').toLowerCase();\n\n  // Specific Item Detection based on labels generated in StepStagePlot\n  if (isPerson) {\n    return { width: 0.5, depth: 0.5, height: 1.7, color: COLORS.person, shape: 'person' };\n  } \n  \n  if (isMonitor) {\n    return { width: 0.6, depth: 0.4, height: 0.3, color: COLORS.monitor, shape: 'wedge' };\n  }\n\n  if (isPower) {\n    return { width: 0.3, depth: 0.3, height: 0.3, color: COLORS.power, shape: 'box' };\n  }\n\n  if (isStand) {\n    return { width: 0.2, depth: 0.2, height: 1.5, color: COLORS.stand, shape: 'pole' };\n  }\n\n  // Instrument / Gear detection\n  if (label.includes('amp')) {\n    return { width: 0.7, depth: 0.4, height: 0.7, color: COLORS.amp, shape: 'box' };\n  }\n  if (label.includes('kit') || label.includes('drum')) {\n    return { width: 1.8, depth: 1.5, height: 0.9, color: COLORS.drum, shape: 'box' };\n  }\n  if (label.includes('keys')) {\n    return { width: 1.2, depth: 0.4, height: 0.9, color: COLORS.keys, shape: 'box' };\n  }\n  if (label.includes('di')) {\n    return { width: 0.2, depth: 0.2, height: 0.1, color: COLORS.di, shape: 'box' };\n  }\n  if (label.includes('pedal') || label.includes('modeller')) {\n    return { width: 0.6, depth: 0.3, height: 0.1, color: COLORS.pedalboard, shape: 'box' };\n  }\n  if (label.includes('mic')) {\n    return { width: 0.2, depth: 0.2, height: 1.5, color: COLORS.mic, shape: 'pole' };\n  }\n  \n  if (label.includes('gtr') || label.includes('guitar') || label.includes('bass') || label.includes('sax') || label.includes('tpt') || label.includes('brass')) {\n     // Instrument on stand\n     return { width: 0.4, depth: 0.3, height: 1.0, color: COLORS.instrument, shape: 'instrument' };\n  }\n\n  // Fallback\n  return { width: 0.3, depth: 0.3, height: 0.3, color: '#cbd5e1', shape: 'box' };\n};"],"names":[],"mappings":"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"}},
    {"offset": {"line": 173, "column": 0}, "map": {"version":3,"sources":["file:///Users/rikdewit/code/Miked.app/utils/stageHelpers.ts"],"sourcesContent":["\nimport { BandMember, StageItem, InstrumentType, PersonPose } from '../types';\nimport { STAGE_WIDTH, STAGE_DEPTH } from './stageConfig';\nimport { INSTRUMENTS } from '../constants';\n\n// --- Instrument Equipment Helpers ---\nexport const getAmpCount = (instId: string): number => {\n  // gtr_amp_2 has 2 amps, all others with 'amp' have 1\n  return instId === 'gtr_amp_2' ? 2 : 1;\n};\n\nexport const getDiInputCount = (instId: string): number => {\n  if (instId === 'dj') return 2; // DJ L + DJ R\n  if (instId === 'keys_stereo') return 2; // Keys L + Keys R\n  if (instId === 'tracks_stereo') return 2; // Tracks L + Tracks R\n  if (instId === 'gtr_modeler_stereo') return 2; // Modeller L + Modeller R\n  if (instId === 'bass_combined') return 2; // Bass DI + Bass Amp (though amp is mic)\n  return 1; // Everything else with DI is mono\n};\n\nexport const getDiLabel = (instId: string): string => {\n  const count = getDiInputCount(instId);\n  return count > 1 ? `DI (${count})` : 'DI';\n};\n\nexport const shouldCreateModeller = (instId: string): boolean => {\n  return instId.includes('modeler');\n};\n\n// --- Coordinate Helpers (Data % <-> World) ---\nexport const percentToX = (p: number) => ((p / 100) * STAGE_WIDTH) - (STAGE_WIDTH / 2);\nexport const percentToZ = (p: number) => ((p / 100) * STAGE_DEPTH) - (STAGE_DEPTH / 2);\nexport const xToPercent = (w: number) => ((w + (STAGE_WIDTH / 2)) / STAGE_WIDTH) * 100;\nexport const zToPercent = (w: number) => ((w + (STAGE_DEPTH / 2)) / STAGE_DEPTH) * 100;\n\n// --- Logic to generate individual items for a member ---\nexport const generateMemberItems = (member: BandMember, startX: number, startY: number, idBaseOverride?: string): StageItem[] => {\n    const items: StageItem[] = [];\n    const baseId = idBaseOverride || `${member.id}-${Date.now()}`;\n\n    // 1. The Person (No instrument Index)\n    items.push({ \n        id: `person-${baseId}`, \n        memberId: member.id, \n        type: 'person', \n        label: member.name || 'Musician', \n        x: startX, \n        y: startY,\n        isPeripheral: false \n    });\n\n    // 2. Instruments & Gear\n    let ampCount = 0;\n    let hasAssignedHeld = false; // Flag to ensure only one instrument is \"held\"\n\n    member.instruments.forEach((slot, idx) => {\n        const instId = slot.instrumentId;\n        const inst = INSTRUMENTS.find(i => i.id === instId);\n        if (!inst) return;\n\n        // Offsets to spread items around the person\n        const isRight = idx % 2 === 0;\n        const spreadX = isRight ? 8 : -8; \n        \n        // Note: Drums, Keys (main body), and Vocals are now part of the Person model, \n        // so we do not generate separate stage items for them.\n\n        // KEYS - Only add peripherals like DI\n        if (inst.type === InstrumentType.KEYS) {\n            // Add DI Box for Keys\n            const diInputCount = instId.includes('stereo') ? 2 : 1;\n            const diLabel = diInputCount > 1 ? `DI (${diInputCount})` : 'DI';\n            items.push({\n                id: `di-${baseId}-${idx}`,\n                memberId: member.id,\n                type: 'member',\n                label: diLabel,\n                x: startX + spreadX + (isRight ? 3 : -3),\n                y: startY + 5,\n                fromInstrumentIndex: idx,\n                isPeripheral: true\n            });\n        }\n\n        // AMPS\n        else if (instId.includes('amp') || instId.includes('combined')) {\n           const numAmps = getAmpCount(instId);\n           for (let ampIdx = 0; ampIdx < numAmps; ampIdx++) {\n               const ampX = startX + (ampCount % 2 === 0 ? -12 : 12);\n               items.push({ id: `amp-${baseId}-${idx}-${ampIdx}`, memberId: member.id, type: 'member', label: 'Amp', x: ampX, y: startY - 10, fromInstrumentIndex: idx, isPeripheral: true });\n               ampCount++;\n           }\n        }\n\n        // INSTRUMENTS ON STANDS OR HELD (Guitar/Bass/Brass)\n        if ([InstrumentType.GUITAR, InstrumentType.BASS, InstrumentType.BRASS].includes(inst.type)) {\n            let isHeld = false;\n            \n            // If we haven't assigned a handheld instrument yet, this one becomes held.\n            if (!hasAssignedHeld) {\n                hasAssignedHeld = true;\n                isHeld = true;\n            }\n\n            if (!isHeld) {\n                // Instrument Body on Stand (Core)\n                items.push({ \n                    id: `inst-${baseId}-${idx}`, \n                    memberId: member.id, \n                    type: 'member', \n                    label: inst.group, // Use Group Name (e.g. \"Acoustic Guitar\") instead of Type (\"Guitar\")\n                    x: startX + spreadX, \n                    y: startY - 5,\n                    fromInstrumentIndex: idx,\n                    isPeripheral: false \n                });\n            }\n\n            // Pedalboard / Modeller (Peripheral)\n            if (shouldCreateModeller(instId)) {\n                 items.push({ id: `mod-${baseId}-${idx}`, memberId: member.id, type: 'member', label: 'Modeller', x: startX + spreadX, y: startY + 8, fromInstrumentIndex: idx, isPeripheral: true });\n            } else if (inst.type !== InstrumentType.BRASS && inst.id !== 'gtr_ac') {\n                 items.push({ id: `pedal-${baseId}-${idx}`, memberId: member.id, type: 'member', label: 'Pedals', x: startX + spreadX, y: startY + 8, fromInstrumentIndex: idx, isPeripheral: true });\n            }\n            \n            // DI Box (Peripheral)\n            if (inst.defaultDi || instId.includes('di')) {\n                 const diLabel = getDiLabel(instId);\n                 items.push({ id: `di-${baseId}-${idx}`, memberId: member.id, type: 'member', label: diLabel, x: startX + spreadX + (isRight?2:-2), y: startY + 5, fromInstrumentIndex: idx, isPeripheral: true });\n            }\n        }\n    });\n\n    return items;\n};\n\n// --- Helper to determine Person Pose based on instruments ---\nexport const getPersonPose = (member: BandMember): { pose: PersonPose; heldInstrumentId?: string } => {\n    let pose: PersonPose = 'stand';\n    let heldInstrumentId: string | undefined;\n\n    // 1. Roles (Drums, Keys, DJ, Vocals)\n    const hasDrums = member.instruments.some(slot => INSTRUMENTS.find(i => i.id === slot.instrumentId)?.type === InstrumentType.DRUMS);\n    const hasKeys = member.instruments.some(slot => INSTRUMENTS.find(i => i.id === slot.instrumentId)?.type === InstrumentType.KEYS);\n    const hasDj = member.instruments.some(slot => slot.instrumentId === 'dj');\n    const hasVocal = member.instruments.some(slot => INSTRUMENTS.find(i => i.id === slot.instrumentId)?.type === InstrumentType.VOCAL);\n\n    if (hasDrums) {\n        pose = 'drums';\n    } else if (hasDj) {\n        pose = 'dj';\n    } else if (hasKeys) {\n        pose = 'keys';\n    } else {\n        // 2. Held Instruments (Guitar, Bass, Brass)\n        const heldSlot = member.instruments.find(slot => {\n            const inst = INSTRUMENTS.find(i => i.id === slot.instrumentId);\n            return inst && [InstrumentType.GUITAR, InstrumentType.BASS, InstrumentType.BRASS].includes(inst.type);\n        });\n        heldInstrumentId = heldSlot?.instrumentId;\n\n        if (heldInstrumentId) {\n            const inst = INSTRUMENTS.find(i => i.id === heldInstrumentId);\n            const labelLower = (inst?.group || '').toLowerCase();\n            \n            if (inst?.type === InstrumentType.BASS) pose = 'bass';\n            else if (inst?.id === 'gtr_ac' || labelLower.includes('acoustic')) pose = 'acoustic';\n            else if (inst?.type === InstrumentType.GUITAR) pose = 'guitar';\n            else if (labelLower.includes('trumpet') || labelLower.includes('tpt')) pose = 'trumpet';\n            else if (labelLower.includes('sax')) pose = 'sax';\n        } else if (hasVocal) {\n            pose = 'singing';\n        }\n    }\n\n    return { pose, heldInstrumentId };\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 397, "column": 0}, "map": {"version":3,"sources":["file:///Users/rikdewit/code/Miked.app/components/3d/StageModels.tsx"],"sourcesContent":["\nimport { useMemo } from 'react';\nimport { useGLTF } from '@react-three/drei';\nimport * as THREE from 'three';\n// @ts-ignore\nimport { clone as cloneGLTF } from 'three/examples/jsm/utils/SkeletonUtils';\nimport { PersonPose } from '../../types';\n\nconst BASE_URL = '/assets/';\n\nconst URLS = {\n  GUITAR_ELEC: BASE_URL + 'Electric_Guitar_Telecaster_Blue.glb',\n  GUITAR_ACOUSTIC: BASE_URL + 'Acoustic_Guitar_Beige.glb',\n  BASS: BASE_URL + 'Bass_Guitar_Firebird_Red.glb',\n  AMPLIFIER: BASE_URL + 'Amplifier.glb',\n  DRUMS: BASE_URL + 'Drums_A.glb',\n  PERSON: BASE_URL + 'Male_Strong.glb',\n  \n  // Baked Animation Models\n  MALE_ACOUSTIC: BASE_URL + 'Male_Ac_Guitar_Playing.glb',\n  MALE_BASS: BASE_URL + 'Male_Bass_Playing.glb',\n  MALE_DRUMS: BASE_URL + 'Male_Drumming.glb', \n  MALE_GUITAR: BASE_URL + 'Male_Guitar_Playing.glb',\n  MALE_KEYS: BASE_URL + 'Male_Keys_Playing.glb',\n  MALE_TRUMPET: BASE_URL + 'Male_Trumpet_Playing.glb',\n  MALE_SAX: BASE_URL + 'Male_Sax_Playing.glb',\n  MALE_SINGING: BASE_URL + 'Male_Singing.glb',\n  MALE_DJ: BASE_URL + 'Male_DJ.glb',\n\n  MIC_STAND: BASE_URL + 'Microfon_Stand_B.glb',\n  SAX: BASE_URL + 'Saxophone.glb',\n  TRUMPET: BASE_URL + 'Trumpet.glb',\n  STAND: BASE_URL + 'Stand.glb',\n  SYNTH: BASE_URL + 'Synth.glb',\n};\n\n// Preload models\nObject.values(URLS).forEach(url => useGLTF.preload(url));\n\n// --- CENTRALIZED OFFSETS ---\nexport const MODEL_OFFSETS = {\n  DRUMS: [0, 0, 0] as [number, number, number],\n  SAX: [0, 0, 0] as [number, number, number],\n  TRUMPET: [0, 0, 0] as [number, number, number],\n  SYNTH: [0, 0, 0] as [number, number, number],\n  DEFAULT: [0, 0, 0] as [number, number, number],\n};\n\nexport const useStageModel = (url: string, color?: string) => {\n  const { scene } = useGLTF(url);\n  \n  const model = useMemo(() => {\n      const cloned = cloneGLTF(scene);\n      cloned.traverse((node: any) => {\n          if (node.isMesh) {\n             const mesh = node as THREE.Mesh;\n             mesh.castShadow = true;\n             mesh.receiveShadow = true;\n             \n             if (color && mesh.material) {\n                 const materials = Array.isArray(mesh.material) ? mesh.material : [mesh.material];\n                 const newMaterials = materials.map(m => {\n                     const nm = m.clone() as THREE.MeshStandardMaterial;\n                     nm.color.set(color);\n                     nm.metalness = 0.1;\n                     nm.roughness = 0.6;\n                     return nm;\n                 });\n                 mesh.material = Array.isArray(mesh.material) ? newMaterials : newMaterials[0];\n             }\n          }\n      });\n      return cloned;\n  }, [scene, color]);\n\n  return model;\n};\n\n// --- Simplified Instrument Models ---\n\nexport const ElectricGuitarModel = ({ color }: { color?: string }) => {\n  const model = useStageModel(URLS.GUITAR_ELEC, color);\n  return <primitive object={model} scale={1} rotation={[0, Math.PI / 2, 0]} position={MODEL_OFFSETS.DEFAULT} />;\n};\n\nexport const AcousticGuitarModel = ({ color }: { color?: string }) => {\n  const model = useStageModel(URLS.GUITAR_ACOUSTIC, color);\n  return <primitive object={model} scale={1} rotation={[0, Math.PI / 2, 0]} position={MODEL_OFFSETS.DEFAULT} />;\n};\n\nexport const BassModel = ({ color }: { color?: string }) => {\n  const model = useStageModel(URLS.BASS, color);\n  return <primitive object={model} scale={1} rotation={[0, 0, 0]} position={MODEL_OFFSETS.DEFAULT} />;\n};\n\nexport const AmpModel = ({ color }: { color?: string }) => {\n  const model = useStageModel(URLS.AMPLIFIER, color);\n  return <primitive object={model} scale={1} position={MODEL_OFFSETS.DEFAULT} />;\n};\n\nexport const DrumsModel = ({ color }: { color?: string }) => {\n  const model = useStageModel(URLS.DRUMS, color);\n  return <primitive object={model} scale={1} position={MODEL_OFFSETS.DRUMS} rotation={[0, 0, 0]} />;\n};\n\nexport const SynthModel = ({ color }: { color?: string }) => {\n  const model = useStageModel(URLS.SYNTH, color);\n  return <primitive object={model} scale={1} position={MODEL_OFFSETS.SYNTH} rotation={[0, Math.PI, 0]} />;\n};\n\nexport const MicStandModel = ({ color }: { color?: string }) => {\n  const model = useStageModel(URLS.MIC_STAND, color);\n  return <primitive object={model} scale={1} position={MODEL_OFFSETS.DEFAULT} rotation={[0, Math.PI, 0]} />;\n};\n\nexport const SaxModel = ({ color }: { color?: string }) => {\n  const model = useStageModel(URLS.SAX, color);\n  return <primitive object={model} scale={1} position={MODEL_OFFSETS.SAX} />;\n};\n\nexport const TrumpetModel = ({ color }: { color?: string }) => {\n  const model = useStageModel(URLS.TRUMPET, color);\n  return <primitive object={model} scale={1} position={MODEL_OFFSETS.TRUMPET} />;\n};\n\nexport const StandModel = ({ color }: { color?: string }) => {\n  const model = useStageModel(URLS.STAND, color);\n  return <primitive object={model} scale={1} position={MODEL_OFFSETS.DEFAULT} />;\n};\n\nexport const PersonModel = ({ color, pose = 'stand' }: { color?: string, pose?: PersonPose }) => {\n  // Load the appropriate baked animation model based on pose\n  let url = URLS.PERSON;\n  if (pose === 'acoustic') url = URLS.MALE_ACOUSTIC;\n  else if (pose === 'bass') url = URLS.MALE_BASS;\n  else if (pose === 'guitar') url = URLS.MALE_GUITAR;\n  else if (pose === 'drums') url = URLS.MALE_DRUMS;\n  else if (pose === 'keys') url = URLS.MALE_KEYS;\n  else if (pose === 'trumpet') url = URLS.MALE_TRUMPET;\n  else if (pose === 'sax') url = URLS.MALE_SAX;\n  else if (pose === 'singing') url = URLS.MALE_SINGING;\n  else if (pose === 'dj') url = URLS.MALE_DJ;\n\n  const { scene } = useGLTF(url);\n\n  const personModel = useMemo(() => {\n    const cloned = cloneGLTF(scene);\n\n    cloned.traverse((node: any) => {\n      if (node.isMesh) {\n        const mesh = node as THREE.Mesh;\n        mesh.castShadow = true;\n        mesh.receiveShadow = true;\n        if (color && mesh.material) {\n          const materials = Array.isArray(mesh.material) ? mesh.material : [mesh.material];\n          const newMaterials = materials.map(m => {\n            const nm = m.clone() as THREE.MeshStandardMaterial;\n            nm.color.set(color);\n            nm.metalness = 0.1;\n            nm.roughness = 0.6;\n            return nm;\n          });\n          mesh.material = Array.isArray(mesh.material) ? newMaterials : newMaterials[0];\n        }\n      }\n    });\n\n    return cloned;\n  }, [scene, color]);\n\n  return (\n    <group>\n      <primitive object={personModel} scale={1} position={MODEL_OFFSETS.DEFAULT} />\n    </group>\n  );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 839, "column": 0}, "map": {"version":3,"sources":["file:///Users/rikdewit/code/Miked.app/components/MemberPreview3D.tsx"],"sourcesContent":["\nimport React, { useMemo, Suspense } from 'react';\nimport { Canvas } from '@react-three/fiber';\nimport { OrbitControls, ContactShadows } from '@react-three/drei';\nimport { BandMember, InstrumentType, PersonPose } from '../types';\nimport { INSTRUMENTS } from '../constants';\nimport { COLORS } from '../utils/stageConfig';\nimport { getPersonPose, getAmpCount, getDiLabel, shouldCreateModeller } from '../utils/stageHelpers';\nimport * as Models from './3d/StageModels';\n\ninterface MemberPreview3DProps {\n  member: BandMember;\n  isDragging?: boolean;\n  isSidebarPreview?: boolean;\n}\n\ninterface SceneItem {\n  id: string;\n  pos: [number, number, number];\n  size: [number, number, number];\n  color: string;\n  label: string;\n  type: string;\n  pose?: PersonPose;\n}\n\ninterface PreviewItemProps {\n  position: [number, number, number];\n  args: [number, number, number];\n  color: string;\n  label?: string;\n  type: string;\n  pose?: PersonPose;\n}\n\nconst PreviewItem: React.FC<PreviewItemProps> = ({ position, args, color, type, pose }) => {\n    const [width, height, depth] = args;\n\n    const renderMesh = () => {\n        if (type === 'person') return <Models.PersonModel pose={pose} />;\n        if (type === 'drums') return <Models.DrumsModel />;\n        if (type === 'amp') return <Models.AmpModel color={color} />;\n\n        if (type === 'keys') {\n            return (\n                <group>\n                    <Models.StandModel color=\"#64748b\" />\n                    <group position={[0, 0.8, 0]}>\n                        <Models.SynthModel />\n                    </group>\n                </group>\n            );\n        }\n\n        if (type === 'mic') return <Models.MicStandModel color={color} />;\n\n        if (type === 'modeller') {\n            return (\n                <group position={[0, 0.05, 0]}>\n                    {/* Main body - looks like an effects unit */}\n                    <mesh castShadow receiveShadow position={[0, 0, 0]}>\n                        <boxGeometry args={[0.55, 0.08, 0.3]} />\n                        <meshStandardMaterial color=\"#111827\" roughness={0.5} metalness={0.4} />\n                    </mesh>\n                    {/* Top panel highlight */}\n                    <mesh position={[0, 0.041, 0]}>\n                        <boxGeometry args={[0.5, 0.002, 0.25]} />\n                        <meshStandardMaterial color=\"#374151\" roughness={0.3} metalness={0.6} />\n                    </mesh>\n                    {/* Control buttons/indicators */}\n                    <mesh position={[-0.15, 0.045, 0]}>\n                        <boxGeometry args={[0.08, 0.015, 0.04]} />\n                        <meshStandardMaterial color=\"#10b981\" roughness={0.2} metalness={0.8} />\n                    </mesh>\n                    <mesh position={[0, 0.045, 0]}>\n                        <boxGeometry args={[0.08, 0.015, 0.04]} />\n                        <meshStandardMaterial color=\"#10b981\" roughness={0.2} metalness={0.8} />\n                    </mesh>\n                    <mesh position={[0.15, 0.045, 0]}>\n                        <boxGeometry args={[0.08, 0.015, 0.04]} />\n                        <meshStandardMaterial color=\"#10b981\" roughness={0.2} metalness={0.8} />\n                    </mesh>\n                </group>\n            );\n        }\n\n        if (type === 'di') {\n            return (\n                <group position={[0, 0.02, 0]}>\n                    {/* DI box body */}\n                    <mesh castShadow receiveShadow position={[0, 0, 0]}>\n                        <boxGeometry args={[0.25, 0.08, 0.15]} />\n                        <meshStandardMaterial color=\"#ea580c\" roughness={0.5} metalness={0.3} />\n                    </mesh>\n                    {/* Panel detail */}\n                    <mesh position={[0, 0.041, 0]}>\n                        <boxGeometry args={[0.22, 0.002, 0.12]} />\n                        <meshStandardMaterial color=\"#f97316\" roughness={0.3} metalness={0.5} />\n                    </mesh>\n                </group>\n            );\n        }\n\n        // Instruments (Standalone)\n        if (type === 'guitar_elec') return <Models.ElectricGuitarModel color={color} />;\n        if (type === 'guitar_ac') return <Models.AcousticGuitarModel color={color} />;\n        if (type === 'bass') return <Models.BassModel color={color} />;\n        if (type === 'sax') return <Models.SaxModel color={color} />;\n        if (type === 'trumpet') return <Models.TrumpetModel color={color} />;\n\n        if (type === 'wedge') {\n            return (\n                <mesh position={[0, height/2, 0]} rotation={[Math.PI/6, 0, 0]} castShadow receiveShadow>\n                    <boxGeometry args={[width, height, depth]} />\n                    <meshStandardMaterial color={color} roughness={0.4} />\n                </mesh>\n            );\n        }\n\n        return (\n            <mesh castShadow receiveShadow position={[0, height/2, 0]}>\n                <boxGeometry args={[width, height, depth]} />\n                <meshStandardMaterial color={color} roughness={0.4} />\n            </mesh>\n        );\n    };\n\n    return (\n        <group position={position}>\n            {renderMesh()}\n        </group>\n    );\n};\n\nexport const MemberPreview3D: React.FC<MemberPreview3DProps> = ({ member, isDragging = false, isSidebarPreview = false }) => {\n\n  const sceneItems = useMemo(() => {\n    const items: SceneItem[] = [];\n\n    // --- DETERMINE POSE ---\n    const { pose, heldInstrumentId } = getPersonPose(member);\n\n    // 1. The Person\n    items.push({\n      id: 'person',\n      pos: [0, 0, 0],\n      size: [0.5, 1.7, 0.5],\n      color: COLORS.person,\n      label: member.name || 'Musician',\n      type: 'person',\n      pose: pose\n    });\n\n    let ampCount = 0;\n    let instrumentCount = 0;\n    let diCount = 0;\n\n    member.instruments.forEach((slot) => {\n      const instId = slot.instrumentId;\n      const inst = INSTRUMENTS.find(i => i.id === instId);\n      if (!inst) return;\n\n      // Note: DRUMS, KEYS, DJ, VOCALS are part of the person model or main scene setup,\n      // so we don't add separate items for them here unless they are peripherals.\n\n      // --- AMPS ---\n      if (instId.includes('amp') || instId.includes('combined')) {\n        const numAmps = getAmpCount(instId);\n        for (let ampIdx = 0; ampIdx < numAmps; ampIdx++) {\n          const offset = ampCount % 2 === 0 ? -0.9 : 0.9;\n          items.push({\n              id: `amp-${instId}-${ampCount}-${ampIdx}`,\n              pos: [offset, 0, -0.6],\n              size: [0.7, 0.7, 0.4],\n              color: COLORS.amp,\n              label: 'Amp',\n              type: 'amp'\n          });\n          ampCount++;\n        }\n      }\n\n      // --- DI BOXES ---\n      // Skip DJ (has XLR inputs instead)\n      if ((inst.defaultDi || instId.includes('di')) && instId !== 'dj') {\n        const diLabel = getDiLabel(instId);\n        const diOffset = diCount % 2 === 0 ? -0.35 : 0.35;\n\n        items.push({\n            id: `di-${instId}-${diCount}`,\n            pos: [diOffset, 0, -1.2],\n            size: [0.3, 0.1, 0.2],\n            color: COLORS.di,\n            label: diLabel,\n            type: 'di'\n        });\n        diCount++;\n      }\n\n      // --- INSTRUMENTS (Standalone on stands) ---\n      // We only add these if they are NOT the instrument currently being held/played in the model\n      const isHeld = (instId === heldInstrumentId);\n      const isBakedPose = ['guitar', 'bass', 'acoustic', 'sax', 'trumpet'].includes(pose);\n\n      // Note: We skip the instrument BODY if held with baked pose,\n      // but we still add DI/Modeller/Pedals (those are always peripherals)\n\n      if (inst.type === InstrumentType.GUITAR || inst.type === InstrumentType.BASS || inst.type === InstrumentType.BRASS) {\n          const isRight = instrumentCount % 2 === 0;\n          const sideOffset = isRight ? 0.6 : -0.6;\n\n          // Only add instrument body if it's NOT held with a baked pose\n          if (!isHeld || !isBakedPose) {\n              let type = 'box';\n              if (inst.id === 'gtr_ac') type = 'guitar_ac';\n              else if (inst.type === InstrumentType.BASS) type = 'bass';\n              else if (inst.type === InstrumentType.GUITAR) type = 'guitar_elec';\n              else if (inst.id.includes('sax')) type = 'sax';\n              else if (inst.id.includes('tpt') || inst.id.includes('trumpet')) type = 'trumpet';\n\n              items.push({\n                  id: `inst-body-${instId}`,\n                  pos: [sideOffset, 0, 0.1],\n                  size: [0.4, 1.0, 0.3],\n                  color: COLORS.instrument,\n                  label: inst.type,\n                  type: type\n              });\n          }\n\n          // Modeller and Pedals are always added (peripherals)\n          if (shouldCreateModeller(instId)) {\n              items.push({\n                  id: `modeller-${instId}`,\n                  pos: [sideOffset, 0, 0.7],\n                  size: [0.6, 0.1, 0.3],\n                  color: COLORS.pedalboard,\n                  label: 'Modeller',\n                  type: 'modeller'\n              });\n          } else if ((inst.type === InstrumentType.GUITAR || inst.type === InstrumentType.BASS) && inst.id !== 'gtr_ac') {\n               items.push({\n                   id: `pedal-${instId}`,\n                   pos: [sideOffset, 0, 0.7],\n                   size: [0.6, 0.1, 0.3],\n                   color: COLORS.pedalboard,\n                   label: 'Pedals',\n                   type: 'box'\n               });\n          }\n\n          instrumentCount++;\n      }\n    });\n\n    return items;\n  }, [member]);\n\n  return (\n    <div\n      className=\"w-full h-full bg-slate-900 rounded-lg overflow-hidden relative border border-slate-700 shadow-inner\"\n      style={{ touchAction: isSidebarPreview ? 'auto' : 'none' }}\n    >\n        <Canvas shadows camera={{ position: [2.5, 2.5, 3.5], fov: 35 }} style={{ touchAction: isSidebarPreview ? 'auto' : 'none', pointerEvents: isSidebarPreview ? 'none' : 'auto' }}>\n            <ambientLight intensity={0.6} />\n            <directionalLight position={[5, 8, 5]} intensity={1.2} castShadow shadow-mapSize={[512, 512]} />\n            <pointLight position={[-5, 2, -5]} intensity={0.5} color=\"#3b82f6\" />\n\n            <Suspense fallback={null}>\n                <group position={[0, -0.8, 0]}>\n                    {sceneItems.map((item, idx) => (\n                        <PreviewItem\n                            key={idx}\n                            position={item.pos}\n                            args={item.size}\n                            color={item.color}\n                            type={item.type}\n                            pose={item.pose}\n                        />\n                    ))}\n                    <gridHelper args={[5, 5, 0x334155, 0x1e293b]} position={[0, 0.001, 0]} />\n                    <ContactShadows position={[0, 0, 0]} opacity={0.6} scale={10} blur={2} far={1.5} />\n                </group>\n            </Suspense>\n\n            <OrbitControls enabled={!isSidebarPreview} enableZoom={false} autoRotate={!isDragging} autoRotateSpeed={1.5} minPolarAngle={0} maxPolarAngle={Math.PI / 2.2} />\n        </Canvas>\n    </div>\n  );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1637, "column": 0}, "map": {"version":3,"sources":["file:///Users/rikdewit/code/Miked.app/components/StepInstruments.tsx"],"sourcesContent":["'use client'\n\nimport React, { useState } from 'react';\nimport { Plus, Trash2, X, Music2, ChevronDown } from 'lucide-react';\nimport { RiderData, InputConfig } from '../types';\nimport { INSTRUMENTS } from '../constants';\nimport { getDefaultInputsForSlot } from '../utils/inputUtils';\nimport { MemberPreview3D } from './MemberPreview3D';\n\ninterface StepInstrumentsProps {\n  data: RiderData;\n  addMember: () => void;\n  applyRockTemplate: () => void;\n  updateMemberName: (id: string, name: string) => void;\n  updateMemberInstrument: (memberId: string, index: number, instrumentId: string) => void;\n  removeMemberInstrument: (memberId: string, index: number) => void;\n  addMemberInstrument: (memberId: string) => void;\n  removeMember: (id: string) => void;\n  updateInstrumentInputs: (memberId: string, index: number, inputs: InputConfig[]) => void;\n}\n\nexport const StepInstruments: React.FC<StepInstrumentsProps> = ({\n  data,\n  addMember,\n  applyRockTemplate,\n  updateMemberName,\n  updateMemberInstrument,\n  removeMemberInstrument,\n  addMemberInstrument,\n  removeMember,\n  updateInstrumentInputs\n}) => {\n  const [expandedInputs, setExpandedInputs] = useState<Set<string>>(new Set());\n\n  // Constants for mic options (common mics used in live sound)\n  const MIC_SUGGESTIONS = ['SM57', 'SM58', 'Beta58', 'Beta52A', 'D112 MKII', 'e604', 'e609', 'RE20', 'Condenser', 'Clip-on (XLR)', 'DI'];\n\n  // Get unique groups for the dropdown\n  const uniqueGroups = Array.from(new Set(INSTRUMENTS.map(i => i.group)));\n\n  // Toggle expanded state for inputs\n  const toggleInputsExpanded = (memberId: string, instrIndex: number) => {\n    const key = `${memberId}-${instrIndex}`;\n    const newExpanded = new Set(expandedInputs);\n    if (newExpanded.has(key)) {\n      newExpanded.delete(key);\n    } else {\n      newExpanded.add(key);\n    }\n    setExpandedInputs(newExpanded);\n  };\n\n  // Get effective inputs (custom or defaults)\n  const getEffectiveInputs = (slot: ReturnType<typeof getDefaultInputsForSlot>) => {\n    return slot;\n  };\n\n  // Helper to find valid default ID when switching groups\n  const getDefaultIdForGroup = (groupName: string) => {\n    return INSTRUMENTS.find(i => i.group === groupName)?.id || INSTRUMENTS[0].id;\n  };\n\n  return (\n    <div className=\"max-w-5xl mx-auto w-full\">\n      <h2 className=\"text-3xl font-bold mb-6 flex items-center gap-3\">\n        <span className=\"bg-indigo-600 text-white w-10 h-10 rounded-full flex items-center justify-center text-lg\">1</span>\n        Band Members & Instruments\n      </h2>\n      \n\n      <div className=\"bg-slate-800 rounded-xl p-6 shadow-xl border border-slate-700\">\n        <div className=\"space-y-6\">\n          {data.members.map((member, index) => (\n            <div key={member.id} className=\"relative bg-slate-700/50 rounded-lg p-1 animate-fadeIn border border-slate-600/50\">\n              <span className=\"absolute top-2 left-2 z-10 text-xs font-mono font-bold text-white bg-slate-600 px-2 py-0.5 rounded\">#{index + 1}</span>\n\n              {/* 3D PREVIEW: stacked on mobile, absolutely fills the left strip on desktop */}\n              <div className=\"h-[250px] md:hidden w-full p-2\">\n                <MemberPreview3D member={member} />\n              </div>\n              <div className=\"hidden md:block md:absolute md:left-1 md:top-1 md:bottom-1 md:w-[216px] p-2\">\n                <MemberPreview3D member={member} />\n              </div>\n\n              {/* FORM INPUTS: determines the block height on desktop */}\n                  <div className=\"p-4 pt-0 md:pt-4 md:pl-[228px] space-y-4\">\n                    <div className=\"flex flex-col sm:flex-row gap-4\">\n                        <div className=\"flex-1\">\n                            <label className=\"text-xs text-slate-400 block mb-1\">Member Name</label>\n                            <input\n                            type=\"text\"\n                            value={member.name}\n                            onChange={(e) => updateMemberName(member.id, e.target.value)}\n                            placeholder=\"e.g. John\"\n                            className=\"w-full bg-slate-900 border border-slate-600 rounded px-3 py-2 text-white focus:outline-none focus:border-indigo-500 transition-colors\"\n                            />\n                        </div>\n                    </div>\n\n                    <div className=\"bg-slate-900/50 p-4 rounded-lg border border-slate-600/50\">\n                        <label className=\"text-xs text-slate-400 block mb-3 font-bold uppercase tracking-wide\">Instruments & Gear</label>\n                        <div className=\"space-y-3\">\n                            {member.instruments.map((slot, iIndex) => {\n                                const currentInstrument = INSTRUMENTS.find(i => i.id === slot.instrumentId);\n                                const variants = INSTRUMENTS.filter(i => i.group === currentInstrument?.group);\n\n                                return (\n                                <div key={iIndex} className=\"flex flex-col gap-2 bg-slate-800/50 p-2 rounded border border-slate-700/50\">\n                                    <div className=\"flex gap-2 items-center\">\n                                        <select\n                                            value={currentInstrument?.group || uniqueGroups[0]}\n                                            onChange={(e) => updateMemberInstrument(member.id, iIndex, getDefaultIdForGroup(e.target.value))}\n                                            className=\"flex-1 bg-slate-900 border border-slate-600 rounded px-3 py-2 text-white text-sm focus:outline-none focus:border-indigo-500 cursor-pointer\"\n                                        >\n                                        {uniqueGroups.map(group => (\n                                            <option key={group} value={group}>{group}</option>\n                                        ))}\n                                        </select>\n                                        <button\n                                            onClick={() => removeMemberInstrument(member.id, iIndex)}\n                                            disabled={member.instruments.length === 1}\n                                            className={`p-2 rounded transition-colors ${member.instruments.length === 1 ? 'text-slate-600 cursor-not-allowed' : 'text-slate-400 hover:text-red-400 hover:bg-slate-900'}`}\n                                            title=\"Remove instrument\"\n                                        >\n                                            <X size={16} />\n                                        </button>\n                                    </div>\n\n                                    {/* Variants Selection (if multiple options exist) */}\n                                    {variants.length > 1 && (\n                                        <div className=\"flex flex-wrap gap-2\">\n                                            {variants.map(variant => (\n                                                <button\n                                                    key={variant.id}\n                                                    onClick={() => updateMemberInstrument(member.id, iIndex, variant.id)}\n                                                    className={`text-[10px] sm:text-xs px-2 py-1.5 rounded-md border font-medium transition-all ${\n                                                        slot.instrumentId === variant.id\n                                                        ? 'bg-indigo-600 border-indigo-500 text-white shadow-sm'\n                                                        : 'bg-slate-800 border-slate-600 text-slate-400 hover:border-slate-400 hover:text-slate-200'\n                                                    }`}\n                                                >\n                                                    {variant.variantLabel || variant.name}\n                                                </button>\n                                            ))}\n                                        </div>\n                                    )}\n\n                                    {/* Expandable Inputs Section */}\n                                    {(() => {\n                                      const effectiveInputs = slot.inputs?.length\n                                        ? slot.inputs\n                                        : getDefaultInputsForSlot(slot, INSTRUMENTS);\n                                      const isExpanded = expandedInputs.has(`${member.id}-${iIndex}`);\n                                      const inputCount = effectiveInputs.length;\n\n                                      return (\n                                        <div className=\"border-t border-slate-700/50 pt-2 mt-2\">\n                                          <button\n                                            onClick={() => toggleInputsExpanded(member.id, iIndex)}\n                                            className=\"text-xs text-indigo-400 hover:text-indigo-300 flex items-center gap-1 font-medium px-1 py-1\"\n                                          >\n                                            <ChevronDown size={14} className={`transition-transform ${isExpanded ? 'rotate-180' : ''}`} />\n                                            Inputs ({inputCount} CH)\n                                          </button>\n\n                                          {isExpanded && (\n                                            <div className=\"mt-3 bg-slate-900/30 p-3 rounded border border-slate-700/30\">\n                                              <div className=\"grid grid-cols-[1.5rem_1fr_1fr_2rem] sm:grid-cols-[1fr_1fr_1fr_2rem] gap-x-2 items-center text-xs font-bold text-slate-400 mb-2 pb-2 border-b border-slate-700\">\n                                                <div className=\"sm:hidden\">#</div>\n                                                <div>Channel</div>\n                                                <div>Mic / DI</div>\n                                                <div className=\"sm:col-start-4\"></div>\n                                                <div className=\"col-start-2 col-span-2 sm:col-start-3 sm:row-start-1 sm:col-span-1\">Notes</div>\n                                              </div>\n                                              <div className=\"space-y-2\">\n                                              {effectiveInputs.map((input, inputIdx) => (\n                                                <div key={inputIdx} className=\"grid grid-cols-[1.5rem_1fr_1fr_2rem] sm:grid-cols-[1fr_1fr_1fr_2rem] gap-x-2 gap-y-1.5 items-center text-xs\">\n                                                  <div className=\"sm:hidden text-[10px] text-slate-500 text-right leading-none\">#{inputIdx + 1}</div>\n                                                  <input\n                                                    type=\"text\"\n                                                    value={input.label}\n                                                    onChange={(e) => {\n                                                      const updated = [...effectiveInputs];\n                                                      updated[inputIdx] = { ...updated[inputIdx], label: e.target.value };\n                                                      updateInstrumentInputs(member.id, iIndex, updated);\n                                                    }}\n                                                    placeholder=\"e.g. Kick\"\n                                                    className=\"min-w-0 bg-slate-800 border border-slate-600 rounded px-2 py-1 text-white text-xs focus:outline-none focus:border-indigo-500\"\n                                                  />\n                                                  <input\n                                                    type=\"text\"\n                                                    list={`mic-suggestions-${member.id}-${iIndex}`}\n                                                    value={input.micDi}\n                                                    onChange={(e) => {\n                                                      const updated = [...effectiveInputs];\n                                                      updated[inputIdx] = { ...updated[inputIdx], micDi: e.target.value };\n                                                      updateInstrumentInputs(member.id, iIndex, updated);\n                                                    }}\n                                                    placeholder=\"e.g. SM57, DI\"\n                                                    className=\"min-w-0 bg-slate-800 border border-slate-600 rounded px-2 py-1 text-white text-xs focus:outline-none focus:border-indigo-500\"\n                                                  />\n                                                  <datalist id={`mic-suggestions-${member.id}-${iIndex}`}>\n                                                    {MIC_SUGGESTIONS.map(opt => (\n                                                      <option key={opt} value={opt} />\n                                                    ))}\n                                                  </datalist>\n                                                  <button\n                                                    onClick={() => {\n                                                      const updated = effectiveInputs.filter((_, idx) => idx !== inputIdx);\n                                                      updateInstrumentInputs(member.id, iIndex, updated);\n                                                    }}\n                                                    disabled={effectiveInputs.length === 1}\n                                                    className={`sm:col-start-4 sm:row-start-1 p-1 rounded transition-colors flex items-center justify-center ${effectiveInputs.length === 1 ? 'text-slate-600 cursor-not-allowed' : 'text-slate-400 hover:text-red-400 hover:bg-slate-900'}`}\n                                                  >\n                                                    <X size={14} />\n                                                  </button>\n                                                  <input\n                                                    type=\"text\"\n                                                    value={input.notes || ''}\n                                                    onChange={(e) => {\n                                                      const updated = [...effectiveInputs];\n                                                      updated[inputIdx] = { ...updated[inputIdx], notes: e.target.value };\n                                                      updateInstrumentInputs(member.id, iIndex, updated);\n                                                    }}\n                                                    placeholder=\"e.g. Own mic\"\n                                                    className=\"col-start-2 col-span-2 sm:col-start-3 sm:row-start-1 sm:col-span-1 min-w-0 bg-slate-800 border border-slate-600 rounded px-2 py-1 text-white text-xs focus:outline-none focus:border-indigo-500\"\n                                                  />\n                                                </div>\n                                              ))}\n                                              <button\n                                                onClick={() => {\n                                                  const updated = [...effectiveInputs, { label: '', micDi: 'DI', stand: '' }];\n                                                  updateInstrumentInputs(member.id, iIndex, updated);\n                                                }}\n                                                className=\"text-xs text-indigo-400 hover:text-indigo-300 flex items-center gap-1 font-medium px-1 mt-2\"\n                                              >\n                                                <Plus size={12} /> Add input\n                                              </button>\n                                              </div>\n                                            </div>\n                                          )}\n                                        </div>\n                                      );\n                                    })()}\n                                </div>\n                            )})}\n                            <button\n                                onClick={() => addMemberInstrument(member.id)}\n                                className=\"text-xs text-indigo-400 hover:text-indigo-300 hover:underline flex items-center gap-1 mt-3 font-medium px-1\"\n                            >\n                                <Plus size={14} /> Add another instrument\n                            </button>\n                        </div>\n                    </div>\n                  </div>\n                  <button\n                    onClick={() => removeMember(member.id)}\n                    className=\"absolute top-2 right-2 text-slate-500 hover:text-red-400 hover:bg-slate-800 rounded p-2 transition-colors z-10\"\n                    title=\"Remove member\"\n                  >\n                    <Trash2 size={18} />\n                  </button>\n            </div>\n          ))}\n\n          <button\n            onClick={addMember}\n            className=\"w-full py-6 border-2 border-dashed border-slate-600 rounded-xl text-slate-400 hover:border-indigo-500 hover:text-indigo-400 hover:bg-slate-800/50 transition-all flex items-center justify-center gap-2 font-bold text-lg group\"\n          >\n            <div className=\"bg-slate-700 group-hover:bg-indigo-900 p-2 rounded-full transition-colors\">\n                 <Plus className=\"group-hover:text-white\" />\n            </div>\n            Add Band Member\n          </button>\n        </div>\n\n        {data.members.length === 0 && (\n          <div className=\"mt-6\">\n            <h3 className=\"text-sm font-bold text-slate-400 uppercase tracking-wider mb-3\">Quick Start Templates</h3>\n            <button\n              onClick={applyRockTemplate}\n              className=\"w-full sm:w-auto bg-gradient-to-r from-indigo-900 to-slate-800 border border-indigo-500/30 hover:border-indigo-500 p-4 rounded-xl text-left transition-all hover:shadow-lg hover:shadow-indigo-500/20 group\"\n            >\n              <div className=\"flex items-center gap-3 mb-1\">\n                <div className=\"bg-indigo-600 p-2 rounded-lg text-white group-hover:scale-110 transition-transform\">\n                   <Music2 size={20} />\n                </div>\n                <span className=\"font-bold text-white text-lg\">Rock Band</span>\n              </div>\n              <p className=\"text-slate-400 text-sm pl-[52px]\">\n                Drums, Bass, Electric Guitar, Lead Vocals\n              </p>\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};"],"names":[],"mappings":"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"}}]
}